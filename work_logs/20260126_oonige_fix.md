# Work Log: Great Escape Dice Fix

## 作業概要
大逃げ脚質の終盤ダイスが減算されないバグを修正。`EmojiParser` における正規表現の不備（マイナス記号の見落とし）が原因。特に `73-🎲` のような「固定値直後のマイナス」が加算として扱われていた問題を解決。

## 変更ファイル
*   `[NEW] src/core/parser/oonige.test.ts`: 再現・検証用テストケース。
*   `[MOD] src/core/parser/emojiParser.ts`:
    *   正規表現 `match` を修正し、`(-)?dice` をキャプチャ可能に変更。
    *   正規表現 `match` を修正し、`合計: (-)?\d+` をキャプチャ可能に変更。
    *   固定値パース時の正規表現を修正し、`(\d+)([\+\-])` で符号を取得。`-` の場合はダイス値を反転させる処理を追加。

## 技術的詳細
*   88-ch形式の `Pre-Match` 解析において、以前は末尾の `+` しか想定していなかったが、`-` も許容し、それがダイス演算子として機能するように変更した。
*   テストケース `oonige.test.ts` により、標準形式・88-ch形式（2パターン）の全てで正しい計算結果になることを保証している。

## 次のステップ
*   PMによるレビュー後、必要であれば `main` ブランチへマージ（または次フェーズへ）。
