# Engineer Review Document: Scene 2 Refactor

実装が完了しました。以下のガイドに従って動作確認をお願いします。

## 1. 起動ガイド (Launch Guide)
特別なセットアップは不要です。通常通り起動してください。

```bash
npm run dev
```

ブラウザで `http://localhost:5173` (または表示されたURL) にアクセスし、
**Scene 1** で適当なエントリー（2名以上）を行い、**Scene 2** へ遷移してください。

## 2. 実装内容 (Implementation)
- `src/components/scene/GateScene.tsx` を全面的に書き換えました。
- `REQUIREMENTS.md` の「Scene 2: Gate Lottery」セクションに準拠した4段構成のUIに変更しています。

## 3. 動作確認チェックリスト (UAC)

### [1] エントリー内容確認
- [x] リストに登録した参加者が表示されている。
- [x] 「確認用リストをコピー」ボタンでテキストがクリップボードにコピーされる。

### [2] 枠順抽選ダイス出力
- [x] リストに `名前 dice1d100=` が表示されている。
- [x] 「ダイスリストをコピー」ボタンでコピーされる。

### [3] 結果取り込み & 解析
- [x] 以下のダミーデータを貼り付けて「解析実行」を押し、正常にリストが表示されるか確認してください。
    *(※ウマ娘A, ウマ娘B でエントリーしている場合)*
    ```text
    ウマ娘A dice1d100=50
    ウマ娘B dice1d100=10
    ```
- [ ] **バリデーション確認:** 行数を減らして貼り付けた際、エラーが表示されるか確認してください。

### [4] 枠順確定
- [x] 確定リストで枠順が正しくソートされているか（ダイス値が小さい順）。
    - 上記例の場合: 1枠=ウマ娘B(10), 2枠=ウマ娘A(50) となるはず。
- [x] 「枠順を確定してレース開始」ボタンで次の画面へ遷移するか。

---
ご確認後、フィードバックをお願いいたします。

**フィードバック**
- エラーメッセージの内容が一部不適当（`REQUIREMENTS.md`準拠になっていない箇所がある）
  - A,B,C,Dの4名を登録し、CをEに書き換えた場合: `Participant not found: "E"`, `人数が一致しません (登録: 4人 / 検出: 3人)。コピー漏れがないか確認してください`
    - `REQUIREMENTS.md` L293-294:の通り、`・登録名と一致しないデータが含まれています: "(検出された名前)"`とすべき
    - 「人数の不一致」と判定されているが、実際には「登録名と一致しないデータ」が原因であり、**行数が一致している場合**は「登録名と一致しないデータ」のみを表示すべき
  - `(Total)`の値を書き換えた場合: `Checksum error for D: 0 + 63 != 6`
    - `REQUIREMENTS.md` L291-292:の通り、`・(名前) のダイス合計値が不正です。レスをそのまま貼り付けてください`とすべき
- 枠順確定リストに表示される枠順（丸囲み文字）が小さい
  - 特殊文字であるため、通常の文字と同じ指定では小さく見える場合がある
- 各セクションのコピーボタンがクリックしても視覚的変化がなく、コピーされたかどうかが分かりにくい
  - 成否にかかわらず具体的なフィードバックを表示すべき
    - コピー成功時: `✓ コピーしました`
    - コピー失敗時: ツール側で原因が検知できる場合は原因に応じた具体的な内容を、検知できない場合は「コピーに失敗しました」と表示すべき